# remark-defsplit

[![Build][build-badge]][build]
[![Coverage][coverage-badge]][coverage]
[![Downloads][downloads-badge]][downloads]
[![Size][size-badge]][size]
[![Sponsors][sponsors-badge]][collective]
[![Backers][backers-badge]][collective]
[![Chat][chat-badge]][chat]

**[remark][]** plugin to change links and images to references with separate
definitions.

## Contents

*   [What is this?](#what-is-this)
*   [When should I use this?](#when-should-i-use-this)
*   [Install](#install)
*   [Use](#use)
*   [API](#api)
    *   [`unified().use(remarkDefsplit[, options])`](#unifieduseremarkdefsplit-options)
    *   [`Options`](#options)
*   [Types](#types)
*   [Compatibility](#compatibility)
*   [Security](#security)
*   [Related](#related)
*   [Contribute](#contribute)
*   [License](#license)

## What is this?

This package is a [unified][] ([remark][]) plugin to turn links (`[text](url)`)
and images (`![alt](url)`) into references (`[text][id]`, `![alt][id]`) and
definitions (`[id]: url`).

## When should I use this?

This project is useful when you want to transform markdown and prefer that it
uses references and definitions.
Long URLs in source code can make reading markdown difficult.
References and definitions improve that by moving those URLs into definitions,
outside of paragraphs.

This plugin is very similar to the alternative
[`remark-reference-links`][remark-reference-links].
The difference is that that plugin generates numeric identifiers at the end of
the document, whereas this plugin generates identifiers based on hostnames of
URLs at the end of each section.

A different plugin, [`remark-inline-links`][remark-inline-links], does the
inverse: turn references and definitions into links and images.

## Install

This package is [ESM only][esm].
In Node.js (version 16+), install with [npm][]:

```sh
npm install remark-defsplit
```

In Deno with [`esm.sh`][esmsh]:

```js
import remarkDefsplit from 'https://esm.sh/remark-defsplit@5'
```

In browsers with [`esm.sh`][esmsh]:

```html
<script type="module">
  import remarkDefsplit from 'https://esm.sh/remark-defsplit@5?bundle'
</script>
```

## Use

Say we have the following file `example.md`:

```markdown
# Pluto

[![Build](https://github.com/solar-system/pluto/workflows/main/badge.svg)](https://github.com/solar-system/pluto/actions)

## History

In the 1840s,
[Urbain Le Verrier](https://wikipedia.org/wiki/Urbain_Le_Verrier) used
Newtonian mechanics to predict the position of the then-undiscovered planet
[Neptune](https://wikipedia.org/wiki/Neptune) after analyzing perturbations
in the orbit of [Uranus](https://wikipedia.org/wiki/Uranus).
```

â€¦and a module `example.js`:

```js
import {remark} from 'remark'
import remarkDefsplit from 'remark-defsplit'
import {read} from 'to-vfile'

const file = await remark()
  .use(remarkDefsplit)
  .process(await read('example.md'))

console.log(String(file))
```

â€¦then running `node example.js` yields:

```markdown
# Pluto

[![Build][github-1]][github-2]

[github-1]: https://github.com/solar-system/pluto/workflows/main/badge.svg

[github-2]: https://github.com/solar-system/pluto/actions

## History

In the 1840s,
[Urbain Le Verrier][wikipedia-1] used
Newtonian mechanics to predict the position of the then-undiscovered planet
[Neptune][wikipedia-2] after analyzing perturbations
in the orbit of [Uranus][wikipedia-3].

[wikipedia-1]: https://wikipedia.org/wiki/Urbain_Le_Verrier

[wikipedia-2]: https://wikipedia.org/wiki/Neptune

[wikipedia-3]: https://wikipedia.org/wiki/Uranus
```

> ðŸ‘‰ **Note**: observe that definitions are added at the end of each section
> and that IDs are generated based on the hostname of URLs.

## API

This package exports no identifiers.
The default export is [`remarkDefsplit`][api-remark-defsplit].

### `unified().use(remarkDefsplit[, options])`

Change links and images to references with separate definitions.

###### Parameters

*   `options` ([`Options`][api-options], optional)
    â€” configuration

###### Returns

Transform ([`Transformer`][unified-transformer]).

### `Options`

Configuration (TypeScript type).

###### Fields

*   `id` (`Array<string>` or `string`, optional)
    â€” IDs to use for new definitions instead of autogenerated ones;
    when given one ID, then the first link or image will use that ID, when
    another link or image is seen, itâ€™ll get an autogenerated ID

## Types

This package is fully typed with [TypeScript][].
It exports the additional type [`Options`][api-options].

## Compatibility

Projects maintained by the unified collective are compatible with maintained
versions of Node.js.

When we cut a new major release, we drop support for unmaintained versions of
Node.
This means we try to keep the current release line, `remark-defsplit@^5`,
compatible with Node.js 16.

This plugin works with `unified` version 6+ and `remark` version 7+.

## Security

Use of `remark-defsplit` does not involve **[rehype][]** (**[hast][]**) or user
content so there are no openings for [cross-site scripting (XSS)][wiki-xss]
attacks.

## Related

*   [`remark-reference-links`][remark-reference-links]
    â€” transform links and images into references and definitions with generated
    IDs
*   [`remark-inline-links`][remark-inline-links]
    â€” transform references and definitions into normal links and images

## Contribute

See [`contributing.md`][contributing] in [`remarkjs/.github`][health] for ways
to get started.
See [`support.md`][support] for ways to get help.

This project has a [code of conduct][coc].
By interacting with this repository, organization, or community you agree to
abide by its terms.

## License

[MIT][license] Â© Eugene Sharygin

[build-badge]: https://github.com/remarkjs/remark-defsplit/workflows/main/badge.svg

[build]: https://github.com/remarkjs/remark-defsplit/actions

[coverage-badge]: https://img.shields.io/codecov/c/github/remarkjs/remark-defsplit.svg

[coverage]: https://codecov.io/github/remarkjs/remark-defsplit

[downloads-badge]: https://img.shields.io/npm/dm/remark-defsplit.svg

[downloads]: https://www.npmjs.com/package/remark-defsplit

[size-badge]: https://img.shields.io/bundlejs/size/remark-defsplit

[size]: https://bundlejs.com/?q=remark-defsplit

[sponsors-badge]: https://opencollective.com/unified/sponsors/badge.svg

[backers-badge]: https://opencollective.com/unified/backers/badge.svg

[collective]: https://opencollective.com/unified

[chat-badge]: https://img.shields.io/badge/chat-discussions-success.svg

[chat]: https://github.com/remarkjs/remark/discussions

[npm]: https://docs.npmjs.com/cli/install

[esm]: https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c

[esmsh]: https://esm.sh

[health]: https://github.com/remarkjs/.github

[contributing]: https://github.com/remarkjs/.github/blob/main/contributing.md

[support]: https://github.com/remarkjs/.github/blob/main/support.md

[coc]: https://github.com/remarkjs/.github/blob/main/code-of-conduct.md

[license]: license

[hast]: https://github.com/syntax-tree/hast

[rehype]: https://github.com/rehypejs/rehype

[remark]: https://github.com/remarkjs/remark

[remark-reference-links]: https://github.com/remarkjs/remark-reference-links

[remark-inline-links]: https://github.com/remarkjs/remark-inline-links

[typescript]: https://www.typescriptlang.org

[unified]: https://github.com/unifiedjs/unified

[unified-transformer]: https://github.com/unifiedjs/unified#transformer

[wiki-xss]: https://en.wikipedia.org/wiki/Cross-site_scripting

[api-options]: #options

[api-remark-defsplit]: #unifieduseremarkdefsplit-options
